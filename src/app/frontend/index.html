<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ANÁLISIS | VIOLENCIA-ARMAS</title>

    <link rel="stylesheet" href="estilos/estilos.css">
    <!-- Chart js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- Iconos -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0" />
    <!-- JQuery -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="cargarGraficos.js"></script>
    <script>
        var estados = [
            "Alabama", "Alaska", "Arizona", "Arkansas", "California",
            "Colorado", "Connecticut", "Delaware", "Florida", "Georgia",
            "Hawaii", "Idaho", "Illinois", "Indiana", "Iowa", "Kansas",
            "Kentucky", "Louisiana", "Maine", "Maryland", "Massachusetts",
            "Michigan", "Minnesota", "Mississippi", "Missouri", "Montana",
            "Nebraska", "Nevada", "New Hampshire", "New Jersey", "New Mexico",
            "New York", "North Carolina", "North Dakota", "Ohio", "Oklahoma",
            "Oregon", "Pennsylvania", "Rhode Island", "South Carolina", "South Dakota",
            "Tennessee", "Texas", "Utah", "Vermont", "Virginia", "Washington",
            "West Virginia", "Wisconsin", "Wyoming"
        ];
        var Anios = [
            "2014", "2015", "2016", "2017"
        ];

        /****************************************************
         * Nombre: fncInsertarEstadosSelect                 *
         * Descripcion: Carga los estados dentro del select *
         * **************************************************/
        function fncInsertarEstadosSelect() {

            var selectEstados = document.frmEnvio.cmbEstados;

            // Crear opciones y agregarlas al select
            estados.forEach(function (estado) {
                var opcion = document.createElement("option");
                opcion.value = estado;
                opcion.text = estado;
                selectEstados.appendChild(opcion);
            });
        }

        /****************************************************
         * Nombre: fncInsertarAniosSelect                   *
         * Descripcion: Carga los anios dentro del select   *
         * **************************************************/
        function fncInsertarAniosSelect() {

            var selectAnios = document.frmEnvio.cmbAnio;

            // Crear opciones y agregarlas al select
            Anios.forEach(function (estado) {
                var opcion = document.createElement("option");
                opcion.value = estado;
                opcion.text = estado;
                selectAnios.appendChild(opcion);
            });
        }

        /****************************************************
         * Nombre: fncCargando                              *
         * Descripcion:                                     *
         * **************************************************/
        function fncCargando(bool) {
            objLoader = $(".loader-container");
            if(bool){
                objLoader.show();
            }else{
                objLoader.hide();
            }
        }

        $( document ).ready(function() {
            fncInsertarEstadosSelect();
            fncInsertarAniosSelect();
            fncCargarGraficos();
            fncCargando(false);
        });
    </script>
</head>
<body>
    <div class="loader-container">
        <!-- Loader -->
        <div class="loader"></div>
    </div>
    <header>
        <h1>Análisis de Violencia con Armas en EE. UU. </h1>
    </header>
    <div class="contenedorPrincipal">
        <div class="contenedorFiltros">
            <div class="titulo">
                <p><span class="material-symbols-outlined">search</span>BUSCADOR</p>
            </div>
            <form class="formulario" name="frmEnvio" action="">
                <div class="campoFormulario">
                    <p><label for="cmbEstados">ESTADO</label></p>
                    <select name="cmbEstados" id="cmbEstados" onchange="fncCargarGraficos()">
                        <option value=""></option>
                    </select>
                </div>
                <div class="campoFormulario">
                    <p><label for="cmbAnio">AÑO</label></p>
                    <select name="cmbAnio" id="cmbAnio" onchange="fncCargarGraficos()">
                        <option value=""></option>
                    </select>
                </div>
                <div class="boton" onclick="fncCargarGraficos()"><p>BUSCAR</p></div>
            </form>
        </div>
        <div class="contenedorGraficos">
            <div class="grafico">
                <p class="tituloGrafico">Incidentes con Armas en los Estados según el Clima</p>
                <canvas id="graficoClima"></canvas>
            </div>
            <div class="grafico">
                <p class="tituloGrafico">Incidentes con Armas en los Estados según la Tasa de Pobreza</p>
                <canvas id="graficoPobreza"></canvas>
            </div>
            <div class="grafico">
                <p class="tituloGrafico">Incidentes con Armas en los Estados según el Día</p>
                <canvas id="graficoFindes"></canvas>
            </div>
            <div class="grafico">
                <p class="tituloGrafico">Incidentes con Armas en los Estados según el Número de Leyes de Regulación de Armas</p>
                <canvas id="graficoLeyes"></canvas>
            </div>
        </div>
    </div>
</body>

<script>
    chartClima = new Chart($("#graficoClima")); 
    chartPobreza = new Chart($("#graficoPobreza")); 
    chartFinde = new Chart($("#graficoFindes")); 
    chartLeyes = new Chart($("#graficoLeyes")); 
</script>
</html>